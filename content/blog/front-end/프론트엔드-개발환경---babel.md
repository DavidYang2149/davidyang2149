---
title: í”„ë¡ íŠ¸ì—”ë“œ-ê°œë°œí™˜ê²½ - Babel
date: 2020-09-12 09:09:31
category: front-end
thumbnail: './images/200912-babel-icon.png'
draft: false
---

![](./images/200912-babel-icon.png)

í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ - Babel

> `ì •ë³´` : [**ê¹€ì •í™˜**](https://jeonghwan-kim.github.io/series/2019/12/22/frontend-dev-env-babel.html)ë‹˜ì˜ [í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´ì™€ ì‹¤ìŠµ](https://www.inflearn.com/course/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD)ì„ ê³µë¶€í•˜ê³  ì •ë¦¬í•œ ë‚´ìš©.

# 1. ë°°ê²½ ğŸš€

## 1.1. í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§•

ECMAScript(ì´í•˜ ES)ì˜ ë²„ì „ì´ ì˜¬ë¼ê°ˆ ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ë¬¸ë²•ì´ ì¶”ê°€ë˜ëŠ”ë° ê° ë¸Œë¼ìš°ì €ì˜ ìŠ¤í™ì´ ë”°ë¼ ì§€ì›ì´ ë˜ëŠ” ë¶€ë¶„ì´ ë‹¤ë¥´ë‹¤.

ë°”ë²¨ì€ ì´ëŸ° í¬ë¡œìŠ¤ë¸Œë¼ìš°ì§•ì˜ ë¬¸ì œì ì„ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

ES6(2015) ì´ìƒìœ¼ë¡œ ì‘ì„±í•œ ì½”ë“œë¥¼ ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•˜ë„ë¡ í˜¸í™˜ì„±ì„ ì§€ì¼œì¤€ë‹¤.

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸, JSXì²˜ëŸ¼ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ë¶„ë¥˜ë˜ëŠ” ê²ƒë„ í¬í•¨í•œë‹¤.

## 1.2. íŠ¸ëœìŠ¤íŒŒì¼ê³¼ ë¹Œë“œ

ì´ë ‡ê²Œ ì–¸ì–´ë¡œ ì‘ì„±ëœ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¹„ìŠ·í•œ ìˆ˜ì¤€ì˜ ì¶”ìƒí™”ë¥¼ ê°€ì§„ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ **íŠ¸ëœìŠ¤íŒŒì¼**ì´ë¼ê³  í‘œí˜„í•œë‹¤.

ë³€í™˜ ì „í›„ì˜ ì¶”ìƒí™” ìˆ˜ì¤€ì´ ë‹¤ë¥¸ ë¹Œë“œì™€ëŠ” ë‹¬ë¦¬ íŠ¸ëœìŠ¤íŒŒì¼ì€ ì¶”ìƒí™” ìˆ˜ì¤€ì„ ìœ ì§€í•œ ìƒíƒœë¡œ ì½”ë“œë¥¼ ë³€í™˜í•œë‹¤.

_íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ â†’ ìë°”ìŠ¤í¬ë¦½íŠ¸_, *JSX â†’ ìë°”ìŠ¤í¬ë¦½íŠ¸*ì²˜ëŸ¼ íŠ¸ëœìŠ¤íŒŒì¼ í›„ì—ë„ ì—¬ì „íˆ ì½”ë“œë¥¼ ì½ì„ ìˆ˜ ìˆë‹¤.

# 2. ë°”ë²¨ì˜ ê¸°ë³¸ë™ì‘ ğŸ—¼

ë°”ë²¨ì˜ ì£¼ëœ ì‚¬ìš© ìš©ë„ëŠ” _ES6(2015)_ ì´ìƒì˜ ì½”ë“œë¥¼ ì ë‹¹í•œ í•˜ìœ„ ë²„ì „ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤.

ì´ëŠ” ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬(IE)ê°€ *ES5*ê¹Œì§€ë§Œ ì§€ì›í•˜ëŠ” ë¶€ë¶„ì´ í¬ë‹¤.

ê·¸ëŸ¼ ë°”ë²¨ì„ ì´ìš©í•´ ì•„ë˜ ì½”ë“œë¥¼ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë°”ê¿” ë³´ì.

```js{}
// ./src/app.js
const alert = (msg) => window.alert(msg);
```

ë¨¼ì € ë°”ë²¨ ìµœì‹  ë²„ì „ì„ ì„¤ì¹˜í•œë‹¤. í„°ë¯¸ë„ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì»¤ë§¨ë“œë¼ì¸ ë„êµ¬ë„ í•¨ê»˜ ì„¤ì¹˜í•˜ì.

```sh{}
$ npm install -D @babel/core @babel/cli
```

ì„¤ì¹˜ë¥¼ ì™„ë£Œ í›„ **node_modules/.bin í´ë”**ì— ì¶”ê°€ëœ ë°”ë²¨ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```sh{}
$ npx babel app.js
const alert = msg => window.alert(msg);
```

ë°”ë²¨ì€ ì„¸ ë‹¨ê³„ë¡œ ë¹Œë“œë¥¼ ì§„í–‰í•œë‹¤.

1. íŒŒì‹±(Parsing)
2. ë³€í™˜(Transforming)
3. ì¶œë ¥ (Printing)

ì½”ë“œë¥¼ ì½ê³  ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬(AST)ë¡œ ë³€í™˜í•˜ëŠ” ë‹¨ê³„ë¥¼ **íŒŒì‹±**ì´ë¼ê³  í•œë‹¤.

ì´ê²ƒì€ ë¹Œë“œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸°ì— ì í•©í•œ ìë£Œêµ¬ì¡°ì¸ë° ì»´íŒŒì¼ëŸ¬ ì´ë¡ ì— ì‚¬ìš©ë˜ëŠ” ê°œë…ì´ë‹¤.

ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ **ë³€í™˜**ë‹¨ê³„ì´ë‹¤.

ì‹¤ì œë¡œ ì½”ë“œë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤.

ë³€ê²½ëœ ê²°ê³¼ë¬¼ì„ **ì¶œë ¥**í•˜ëŠ” ê²ƒì„ ë§ˆì§€ë§‰ìœ¼ë¡œ ë°”ë²¨ì€ ì‘ì—…ì„ ì™„ë£Œí•œë‹¤.

ê·¸ëŸ°ë° ê²°ê³¼ë¥¼ ë³´ë©´ ë¹Œë“œ ì´ì „ê³¼ ë³€í•œ ê²Œ í•˜ë‚˜ë„ ì—†ë‹¤.

# 3. í”ŒëŸ¬ê·¸ì¸ ğŸ—ï¸

ê¸°ë³¸ì ìœ¼ë¡œ ë°”ë²¨ì€ ì½”ë“œë¥¼ ë°›ì•„ì„œ ì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤.

ë°”ë²¨ í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ë©´ ì´ëŸ° ëª¨ìŠµì´ ë  ê²ƒì´ë‹¤.

```js{}
const babel = (code) => code;
```

ë°”ë²¨ì€ íŒŒì‹±ê³¼ ì¶œë ¥ë§Œ ë‹´ë‹¹í•˜ê³  ë³€í™˜ ì‘ì—…ì€ ë‹¤ë¥¸ ë…€ì„ì´ ì²˜ë¦¬í•˜ëŠ”ë° ì´ê²ƒì„ **í”ŒëŸ¬ê·¸ì¸**ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

## 3.1. ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸

í”ŒëŸ¬ê·¸ì¸ì„ ì§ì ‘ ë§Œë“¤ë©´ì„œ ë™ì‘ì´ ì›ë¦¬ë¥¼ ì‚´í´ë³´ì.

`myplugin.js` íŒŒì¼ì„ ì•„ë˜ì²˜ëŸ¼ ë§Œë“¤ì–´ ë³´ì.

```js{}
// ./myplugin.js
module.exports = function myplugin() {
  return {
    visitor: {
      Identifier(path) {
        const name = path.node.name;

        // ë°”ë²¨ì´ ë§Œë“  AST ë…¸ë“œë¥¼ ì¶œë ¥í•œë‹¤.
        console.log('Identifier() name:', name);

        // ë³€í™˜ì‘ì—…: ì½”ë“œ ë¬¸ìì—´ì„ ì—­ìˆœìœ¼ë¡œ ë³€í™˜í•œë‹¤.
        path.node.name = name.split('').reverse().join('');
      },
    },
  };
};
```

í”ŒëŸ¬ê·¸ì¸ í˜•ì‹ì€ `visitor ê°ì²´`ë¥¼ ê°€ì§„ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.

ì´ ê°ì²´ëŠ” ë°”ë²¨ì´ íŒŒì‹±í•˜ì—¬ ë§Œë“  ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬(AST)ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.

ê·¸ì¤‘ `Identifier() ë©”ì†Œë“œ`ì˜ ë™ì‘ ì›ë¦¬ë¥¼ ì‚´í´ë³´ëŠ” ì½”ë“œë‹¤.

í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì.

```sh{}
$ npx babel --help

--plugins [list] A comma-separated list of plugin names.
```

`--plugins` ì˜µì…˜ì— í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤.

```sh{}
$ npx babel app.js --plugins ./myplugin.js

Identifier() name: alert
Identifier() name: msg
Identifier() name: window
Identifier() name: alert
Identifier() name: msg

const trela = gsm => wodniw.trela(gsm);
```

`Identifier() ë©”ì†Œë“œ`ë¡œ ë“¤ì–´ì˜¨ ì¸ì pathì— ì ‘ê·¼í•˜ë©´ ì½”ë“œ ì¡°ê°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒ ê°™ë‹¤.

`path.node.name`ì˜ ê°’ì„ ë³€ê²½í•˜ëŠ”ë° ë¬¸ìë¥¼ ë’¤ì§‘ëŠ” ì½”ë“œë‹¤.

ê²°ê³¼ì˜ ë§ˆì§€ë§‰ ì¤„ì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ ì´ ì½”ë“œì˜ ë¬¸ìì—´ ìˆœì„œê°€ ì—­ì „ë˜ì—ˆë‹¤.

ES6(2015)ë¡œ ì‘ì„±í•œ ì½”ë“œë¥¼ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ì—ì„œ ëŒë¦´ ìˆ˜ ìˆë„ë¡ í•´ë³´ì.

ë¨¼ì € `const`ë¥¼ `var`ë¡œ ë³€ê²½í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ë§Œë“¤ì–´ ë³´ì.

```js
// ./myplugin.js
module.exports = function myplugin() {
  return {
    visitor: {
      // https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-block-scoping/src/index.js#L26
      VariableDeclaration(path) {
        console.log('VariableDeclaration() kind:', path.node.kind); // const

        if (path.node.kind === 'const') {
          path.node.kind = 'var';
        }
      },
    },
  };
};
```

ì´ë²ˆì—ëŠ” `vistor ê°ì²´`ì— `VariableDeclaration() ë©”ì†Œë“œ`ë¥¼ ì •ì˜í–ˆë‹¤.

*path*ì— ì ‘ê·¼í•´ ë³´ë©´ í‚¤ì›Œë“œê°€ ì¡íˆëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.

`path.node.kind`ê°€ `const`ì¼ ê²½ìš° `var`ë¡œ ë³€í™˜í•˜ëŠ” ì½”ë“œë‹¤.

ì´ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë‹¤ì‹œ ë¹Œë“œí•´ë³´ì.

```sh{}
$ npx babel app.js --plugins ./myplugin.js

VariableDeclaration() kind: const
var alert = msg => window.alert(msg);
```

ë§ˆì§€ë§‰ ì¤„ì— ë³´ë©´ `const`ê°€ `var`ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.

## 3.2. í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©í•˜ê¸°

ì´ëŸ¬í•œ ê²°ê³¼ë¥¼ ë§Œë“œëŠ” ê²ƒì´ **block-scoping í”ŒëŸ¬ê·¸ì¸**ì´ë‹¤.

`const`, `let`ì²˜ëŸ¼ ë¸”ë¡ ìŠ¤ì½”í•‘ì„ ë”°ë¥´ëŠ” ì˜ˆì•½ì–´ë¥¼ `var`ë¡œ ë³€ê²½í•œë‹¤.

NPM íŒ¨í‚¤ì§€ë¡œ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³ ,

```sh{}
$ npm install -D @babel/plugin-transform-block-scoping
```

ì„¤ì¹˜í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ë³´ë©´,

```sh{}
npx babel app.js --plugins @babel/plugin-transform-block-scoping

var alert = msg => window.alert(msg);
```

ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸ê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë° **arrow-functions í”ŒëŸ¬ê·¸ì¸**ì„ ì´ìš©í•´ì„œ ì¼ë°˜ í•¨ìˆ˜ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```sh{}
$ npm install -D @babel/plugin-transform-arrow-functions

$ npx babel app.js \
 --plugins @babel/plugin-transform-block-scoping \
 --plugins @babel/plugin-transform-arrow-functions

var alert = function (msg) {
return window.alert(msg);
};
```

ES5ì—ì„œë¶€í„° ì§€ì›í•˜ëŠ” ì—„ê²© ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ê¸° ë•Œë¬¸ì— "use strict" êµ¬ë¬¸ì„ ì¶”ê°€í•´ë³´ì.

**strict-mode í”ŒëŸ¬ê·¸ì¸**ì„ ì‚¬ìš©í•˜ì.

```sh{}
$ npm install -D @babel/plugin-transform-strict-mode
```

ê·¸ì „ì— ì»¤ë§¨ë“œë¼ì¸ ëª…ë ¹ì–´ê°€ ì ì  ê¸¸ì–´ì§€ê¸° ë•Œë¬¸ì— ì„¤ì • íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ë‚«ê² ë‹¤.

ì›¹íŒ© `webpack.config.js`ë¥¼ ê¸°ë³¸ ì„¤ì •íŒŒì¼ë¡œ ì‚¬ìš©í•˜ë“¯ ë°”ë²¨ë„ `babel.config.js`ë¥¼ ì‚¬ìš©í•œë‹¤.

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `babel.config.js` íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì.

```js{}
// ./babel.config.js
module.exports = {
  plugins: [
    '@babel/plugin-transform-block-scoping',
    '@babel/plugin-transform-arrow-functions',
    '@babel/plugin-transform-strict-mode',
  ],
};
```

ì»¤ë§¨ë“œë¼ì¸ì—ì„œ ì‚¬ìš©í•œ block-scoping, arrow-functions í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì • íŒŒì¼ë¡œ ì˜®ê²¼ëŠ”ë° plugins ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” ë°©ì‹ì´ë‹¤.

strict-mode í”ŒëŸ¬ê·¸ì¸ì„ ë§ˆì§€ë§‰ ì¤„ì— ì¶”ê°€í–ˆë‹¤.

ë‹¤ì‹œ ë¹Œë“œí•´ë³´ì.

```sh{}
$ npx babel app.js

"use strict";

var alert = function (msg) {
return window.alert(msg);
};
```

ìƒë‹¨ì— "use strict" êµ¬ë¬¸ì´ ì¶”ê°€ë˜ì–´ ì—„ê²©ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆë‹¤.

ì´ì œì•¼ ë¹„ë¡œì†Œ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ì—ì„œ ì•ˆì „í•˜ê²Œ ë™ì‘í•˜ëŠ” ì½”ë“œë¡œ íŠ¸ëœìŠ¤íŒŒì¼í•˜ì˜€ë‹¤.

ì´ì²˜ëŸ¼ ë³€í™˜ì„ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ëª©ë¡ì€ ê³µì‹ ë¬¸ì„œì˜ [Plugins](https://babeljs.io/docs/en/plugins) í˜ì´ì§€ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

# 4. í”„ë¦¬ì…‹ ğŸ«

ëª©ì ì— ë§ê²Œ ì—¬ëŸ¬ ê°€ì§€ í”ŒëŸ¬ê·¸ì¸ì„ ì„¸íŠ¸ë¡œ ëª¨ì•„ë†“ì€ ê²ƒì„ "í”„ë¦¬ì…‹"ì´ë¼ê³  í•œë‹¤.

## 4.1. ì»¤ìŠ¤í…€ í”„ë¦¬ì…‹

ì‚¬ìš©í•œ ì„¸ ê°œ í”ŒëŸ¬ê·¸ì¸ì„ í•˜ë‚˜ì˜ í”„ë¦¬ì…‹ìœ¼ë¡œ ë§Œë“¤ì–´ ë³´ì.

mypreset.js íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ì.

```js{}
// mypreset.js
module.exports = function mypreset() {
  return {
    plugins: [
      '@babel/plugin-transform-arrow-functions',
      '@babel/plugin-transform-block-scoping',
      '@babel/plugin-transform-strict-mode',
    ],
  };
};
```

plugins ë°°ì—´ì— ì‚¬ìš©í•œ ì„¸ ê°œ í”ŒëŸ¬ê·¸ì¸ì„ ë‹´ì•˜ë‹¤.

í”„ë¦¬ì…‹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë°”ë²¨ ì„¤ì •ì„ ì•½ê°„ ìˆ˜ì •í•œë‹¤.

```js{}
// babel.config.js
module.exports = {
  presets: ['./mypreset.js'],
};
```

í”ŒëŸ¬ê·¸ì¸ ì„¸íŒ… ì½”ë“œë¥¼ ì œê±°í•˜ê³  presetsì— ë°©ê¸ˆ ë§Œë“  mypreset.jsë¥¼ ì¶”ê°€í–ˆë‹¤.

ì‹¤í–‰í•´ë³´ë©´ ë™ì¼í•œ ê²°ê³¼ë¥¼ ì¶œë ¥í•  ê²ƒì´ë‹¤.

## 4.2. í”„ë¦¬ì…‹ ì‚¬ìš©í•˜ê¸°

ì´ì²˜ëŸ¼ ë°”ë²¨ì€ ëª©ì ì— ë”°ë¼ ëª‡ ê°€ì§€ í”„ë¦¬ì…‹ì„ ì œê³µí•œë‹¤.

- preset-env
- preset-flow
- preset-react
- preset-typescript

preset-envëŠ” ES6ë¥¼ ë³€í™˜í•  ë•Œ ì‚¬ìš©í•œë‹¤.

ë°”ë²¨ 7 ì´ì „ ë²„ì „ì—ëŠ” ì—°ë„ë³„ë¡œ ê° í”„ë¦¬ì…‹ì„ ì œê³µí–ˆì§€ë§Œ(babel-reset-es2015, babel-reset-es2016...) ì§€ê¸ˆì€ env í•˜ë‚˜ë¡œ í•©ì³ì¡Œë‹¤.

*preset-flow, preset-react, preset-typescript*ëŠ” flow, ë¦¬ì•¡íŠ¸, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³€í™˜í•˜ê¸° ìœ„í•œ í”„ë¦¬ì…‹ì´ë‹¤.

ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ ì§€ì›ì„ ìœ„í•´ env í”„ë¦¬ì…‹ì„ ì‚¬ìš©í•´ ë³´ì.

ë¨¼ì € íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•œë‹¤.

```sh{}
$ npm install -D @babel/preset-env
```

ì„¤ì¹˜í•œ ë°”ë²¨ ì„¤ì •ì„ ì¡°ê¸ˆë§Œ ë” ë°”ê¿”ë³¸ë‹¤.

```js{}
// ./babel.config.js
module.exports = {
  presets: ['@babel/preset-env'],
};
```

ê·¸ë¦¬ê³  ë¹Œë“œí•˜ë©´,

```sh{}
$ npx babel app.js

"use strict";

var alert = function alert(msg) {
return window.alert(msg);
};
```

mypreset.jsì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤.

# 5. env í”„ë¦¬ì…‹ê³¼ ì„¤ì •ê³¼ í´ë¦¬í•„ ğŸš¥

ê³¼ê±°ì—ëŠ” ì—°ë„ë³„ í”„ë¦¬ì…‹ì„ ì œê³µí–ˆë‹¤.

ê·¸ëŸ¬ë‚˜ í˜„ì¬ëŠ” env í”„ë¦¬ì…‹ìœ¼ë¡œ ë¬´ì²™ ë‹¨ìˆœí•˜ê³  ì§ê´€ì ì¸ ì‚¬ìš©ë²•ì„ ì œê³µí•œë‹¤.

## 5.1. íƒ€ê¹ƒ ë¸Œë¼ìš°ì €

ì½”ë“œê°€ í¬ë¡¬ ìµœì‹  ë²„ì „ë§Œ ì§€ì›í•œë‹¤ê³  í•˜ì.

ê·¸ë ‡ë‹¤ë©´ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ë¥¼ ìœ„í•œ ì½”ë“œ ë³€í™˜ì€ ë¶ˆí•„ìš”í•˜ë‹¤.

target ì˜µì…˜ì— ë¸Œë¼ìš°ì € ë²„ì „ëª…ë§Œ ì§€ì •í•˜ë©´ env í”„ë¦¬ì…‹ì€ ì´ì— ë§ëŠ” í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì°¾ì•„ ìµœì ì˜ ì½”ë“œë¥¼ ì¶œë ¥í•´ ë‚¸ë‹¤.

```js{}
// ./babel.config.js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: {
          chrome: '85', // í¬ë¡¬ 85ê¹Œì§€ ì§€ì›í•˜ëŠ” ì½”ë“œë¥¼ ë§Œë“ ë‹¤.
        },
      },
    ],
  ],
};
```

npxë¡œ ì¶œë ¥í•´ë³´ë©´,

```sh{}
$ npx babel app.js

"use strict";

const alert = msg => window.alert(msg);
```

í¬ë¡¬ì€ ë¸”ë¡ ìŠ¤ì½”í•‘ê³¼ í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ë³€í™˜í•˜ì§€ ì•Šê³  ì´ëŸ¬í•œ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì—ˆë‹¤.

ë§Œì•½ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ë„ ì§€ì›í•´ì•¼ í•œë‹¤ë©´ ë°”ë²¨ ì„¤ì •ì— ë¸Œë¼ìš°ì € ì •ë³´ë§Œ í•˜ë‚˜ ë” ì¶”ê°€í•˜ë©´ ëœë‹¤.

```js{}
// ./babel.config.js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: {
          chrome: '85',
          ie: '11', // ie 11ê¹Œì§€ ì§€ì›í•˜ëŠ” ì½”ë“œë¥¼ ë§Œë“ ë‹¤.
        },
      },
    ],
  ],
};
```

## 5.2. í´ë¦¬í•„

ì´ë²ˆì—” ë³€í™˜ê³¼ ì¡°ê¸ˆ ë‹¤ë¥¸ í”Œë¦¬í•„ì— ëŒ€í•´ ì•Œì•„ë³´ì.

ES6ì˜ Promise ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œë‹¤.

```js{}
// ./app.js
new Promise();
```

ë°”ë²¨ë¡œ ì²˜ë¦¬í•˜ë©´ ì–´ë–¤ ê²°ê³¼ê°€ ë‚˜ì˜¬ê¹Œ?

```sh{}
$ npx babel app.js

"use strict";

new Promise();
```

env í”„ë¦¬ì…‹ìœ¼ë¡œ ë³€í™˜ì„ ì‹œë„í–ˆì§€ë§Œ, Promise ê·¸ëŒ€ë¡œ ë³€í•¨ì´ ì—†ë‹¤.

*target*ì— *ie: 11*ì„ ì„¤ì •í•˜ê³  ë¹Œë“œí•œ ê²ƒì¸ë° *ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ëŠ” ì—¬ì „íˆ í”„ë¼ë¯¸ìŠ¤ë¥¼ í•´ì„í•˜ì§€ ëª»í•˜ê³  ğŸš¨ì—ëŸ¬*ë¥¼ ë˜ì§„ë‹¤.

ë¸Œë¼ìš°ì €ëŠ” í˜„ì¬ ìŠ¤ì½”í”„ë¶€í„° ì‹œì‘í•´ ì „ì—­ê¹Œì§€ Promiseë¼ëŠ” ì´ë¦„ì„ ì°¾ìœ¼ë ¤ê³  ì‹œë„í•  ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë‚˜ ìŠ¤ì½”í”„ ì–´ë””ì—ë„ Promiseë€ ì´ë¦„ì´ ì—†ê¸° ë•Œë¬¸ì— ë ˆí¼ëŸ°ìŠ¤ ì—ëŸ¬ë¥¼ ë°œìƒí•˜ê³  í”„ë¡œê·¸ë¨ì´ ì£½ì€ ê²ƒì´ë‹¤.

ë°”ë²¨ì€ ES6 ì´í›„ ë²„ì „ì„ ES5 ë²„ì „ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆëŠ” ê²ƒë§Œ ë¹Œë“œí•œë‹¤.

ê·¸ë ‡ì§€ ëª»í•œ ê²ƒë“¤ì€ **í´ë¦¬í•„**ì´ë¼ê³  ë¶€ë¥´ëŠ” ì½”ë“œì¡°ê°ì„ ì¶”ê°€í•´ì„œ í•´ê²°í•œë‹¤.

ES6ì˜ í”„ë¼ë¯¸ìŠ¤ëŠ” ES5 ë²„ì „ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ì—†ë‹¤.

ë‹¤ë§Œ ES5 ë²„ì „ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ëŠ” ìˆë‹¤([ì°¸ê³ : core-js promise](https://github.com/zloirock/core-js/blob/master/packages/core-js/modules/es.promise.js)).

env í”„ë¦¬ì…‹ì€ í´ë¦¬í•„ì„ ì§€ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì„ ì œê³µí•œë‹¤.

```js{}
// ./babel.config.js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        useBuiltIns: 'usage', // í´ë¦¬í•„ ì‚¬ìš© ë°©ì‹ ì§€ì •.
        corejs: {
          // í´ë¦¬í•„ ë²„ì „ ì§€ì •.
          version: 2,
        },
      },
    ],
  ],
};
```

`useBuiltIns`ëŠ” ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ í´ë¦¬í•„ì„ ì‚¬ìš©í• ì§€ ì„¤ì •í•˜ëŠ” ì˜µì…˜ì´ë‹¤.

`usage`, `entry`, `false` ì„¸ ê°€ì§€ ê°’ì„ ì‚¬ìš©í•˜ëŠ”ë° ê¸°ë³¸ê°’ì´ `false`ì´ë¯€ë¡œ í´ë¦¬í•„ì´ ë™ì‘í•˜ì§€ ì•Šì•˜ë‹¤.

ë°˜ë©´ `usage`ë‚˜ `entry`ë¥¼ ì„¤ì •í•˜ë©´ í´ë¦¬í•„ íŒ¨í‚¤ì§€ ì¤‘ core-jsë¥¼ ëª¨ë“ˆë¡œ ê°€ì ¸ì˜¨ë‹¤.

ìì„¸í•œ í´ë¦¬í•„ ì˜µì…˜ì€ ë°”ë²¨ ë¬¸ì„œì˜ [useBuiltIns](https://babeljs.io/docs/en/babel-preset-env#usebuiltins)ì™€ [corejs](https://babeljs.io/docs/en/babel-preset-env#corejs) ì„¹ì…˜ì„ ì°¸ê³ í•˜ì.

í´ë¦¬í•„ì´ ì¶”ê°€ëœ ê²°ê³¼ë¬¼ì„ í™•ì¸í•´ ë³´ì.

```sh{}
$ npx babel src/app.js
"use strict";

require("core-js/modules/es6.promise");
require("core-js/modules/es6.object.to-string");

new Promise();
```

core-js íŒ¨í‚¤ì§€ë¡œë¶€í„° í”„ë¼ë¯¸ìŠ¤ ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ” import êµ¬ë¬¸ì´ ìƒë‹¨ì— ì¶”ê°€ë˜ì—ˆë‹¤.

ì´ì œì•¼ ë¹„ë¡œì†Œ ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ì—ì„œ ì•ˆì „í•˜ê²Œ ëŒì•„ê°€ëŠ” ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì—ˆë‹¤.

# 6. ì›¹íŒ©ìœ¼ë¡œ í†µí•© ğŸ§­

ì‹¤ë¬´ í™˜ê²½ì—ì„œëŠ” ë°”ë²¨ì„ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì›¹íŒ©ìœ¼ë¡œ í†µí•©í•´ì„œ ì‚¬ìš©í•œë‹¤.

ë³´í†µ ë¡œë” í˜•íƒœë¡œ ì œê³µí•˜ëŠ”ë° **babel-loader**ê°€ ìˆë‹¤.

ë¨¼ì € íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³ ,

```sh{}
$ npm install -D babel-loader
```

ì›¹íŒ© ì„¤ì •ì— ë¡œë”ë¥¼ ì¶”ê°€í•œë‹¤.

```js{}
// ./webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        loader: 'babel-loader', // ë°”ë²¨ ë¡œë”ë¥¼ ì¶”ê°€í•œë‹¤.
      },
    ],
  },
};
```

.js í™•ì¥ìë¡œ ëë‚˜ëŠ” íŒŒì¼ì€ babel-loaderê°€ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤.

ì‚¬ìš©í•˜ëŠ” ì¨ë“œíŒŒí‹° ë¼ì´ë¸Œë¼ë¦¬ê°€ ë§ì„ìˆ˜ë¡ ë°”ë²¨ ë¡œë”ê°€ ëŠë¦¬ê²Œ ë™ì‘í•  ìˆ˜ ìˆëŠ”ë° node_modules í´ë”ë¥¼ ë¡œë”ê°€ ì²˜ë¦¬í•˜ì§€ ì•Šë„ë¡ ì˜ˆì™¸ ì²˜ë¦¬í–ˆë‹¤.

í´ë¦¬í•„ ì‚¬ìš© ì„¤ì •ì„ í–ˆë‹¤ë©´ core-jsë„ ì„¤ì¹˜í•´ì•¼í•œë‹¤.

ì›¹íŒ©ì€ ë°”ë²¨ ë¡œë”ê°€ ë§Œë“  ì•„ë˜ ì½”ë“œë¥¼ ë§Œë‚˜ë©´ core-jsë¥¼ ì°¾ì„ ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.

```sh{}
# ì›¹íŒ©ì´ ì°¾ê³ ì í•˜ëŠ” ë‘ ê°€ì§€ ëª¨ë“ˆ ì˜ˆì‹œ.
require("core-js/modules/es6.promise")
require("core-js/modules/es6.object.to-string")
```

ë²„ì „ 2ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•˜ì.

```sh{}
$ npm i core-js@2
```

ê·¸ë¦¬ê³  ì›¹íŒ©ìœ¼ë¡œ ë¹Œë“œí•˜ë©´,

```sh{}
$ npm run build

> webpack

Hash: a30cff5fbf53027423a0
Version: webpack 4.41.2
Time: 718ms
Built at: 2019. 12. 16. ì˜¤ì „ 8:52:05
Asset Size Chunks Chunk Names
main.js 59.7 KiB main [emitted] main
Entrypoint main = main.js
[./src/app.js] 166 bytes {main} [built]
```

ë¯¸ë¦¬ ë“±ë¡í•´ ë†“ì€ NPM build ìŠ¤í¬ë¦½íŠ¸ì˜ webpack ëª…ë ¹ì–´ê°€ ë™ì‘í•œë‹¤.

`./src/app.js`ì˜ ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ê°€ ë°”ë²¨ ë¡œë”ì— ì˜í•´ ë¹Œë“œë˜ê³  ê²°ê³¼ë¬¼ì´ `./dist/main.js`ë¡œ ì˜®ê²¨ì¡Œë‹¤.

```sh{}
cat ./dist/main.js | grep 'var alert' -A 5

var alert = function alert(msg) {
return window.alert(msg);
};

new Promise();
```

# 7. ì°¸ì¡° ğŸ“‹

- [ê¹€ì •í™˜ë‹˜ ë¸”ë¡œê·¸](https://jeonghwan-kim.github.io/series/2019/12/22/frontend-dev-env-babel.html)
- [ì¸í”„ëŸ° - í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí™˜ê²½ì˜ ì´í•´ì™€ ì‹¤ìŠµ](https://www.inflearn.com/course/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD)

ğŸ‘‹
